
<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<meta content="Das Blog von Marcel. Anscheinend schreibt er dort über interessante Dinge." name="description">
		<meta content="Marcel Langer" name="author">
		
		<title>Tageszeitabhängige Beleuchtung &mdash; Lumenlog</title>
		
		<link href="humans.txt" rel="author" type="text/plain">
		<link href="/favicon.png" rel="icon">
		<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
		<link href="/stylesheets/style.css" rel="stylesheet">
		<link href="http://feeds.feedburner.com/lumenlog" rel="alternate" title="Lumenlog" type="application/rss+xml" />
		<script type="text/javascript" src="http://use.typekit.com/daj0gkz.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
		<script type="text/javascript">
		/* <![CDATA[ */
		    (function() {
        	var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
	        s.type = 'text/javascript';
    	    s.async = true;
        	s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
	        t.parentNode.insertBefore(s, t);
    		})();
		/* ]]> */
		</script>
		<script src="/mint/?js" type="text/javascript"></script>
	</head>
	<body>
		<div id="wrapper">
			<header class="row instapaper_ignore">
				<h1 id="site-title"><a class="site-link" href="/">Lumenlog.</a></h1>
			</header>
			<div id="main">
				<article class="link">
	<header>
		
			<h1 class="link-title">
				<a href="http://lumenpage.com/blog/wp-content/uploads/2008/12/eleyon08.jpg">Tageszeitabhängige Beleuchtung</a>
				<a class="permalink" href="/post/tageszeitabhaengige-beleuchtung/">∞</a>
			</h1>
		
	</header>
	<section class="content">
		<p>Sowohl Oblivion als auch Morrowind ignorieren die Veränderung der Tageszeit, es gehen keine Lichter an oder aus wenn es Nacht wird. Dabei ist das doch recht einfach umzusetzen und bringt einen großen Zuwachs an Lebenendigkeit, an Atmosphäre mit sich. Außerdem ermöglicht ein Tag-Nacht-Wechsel viel abwechslungsreichere Interiors. Diese können nämlich je nach Tageszeit von bläulichem Tageslicht oder von orangenem Feuerschein beleuchtet sein. Ein nächtliche Siedlung mit orangenen Fenstern ist gleich viel lebendiger als eine scheinbare Totenstadt mit nachts unbeleuchteten Fenstern. Eine Variable Beleuchtung beschränkt sich allerdings nicht auf einen Wechsel von Tag und Nacht - nein, auch das Wetter kann berücksichtigt werden. Auch bei Nebel oder Sturm wirken beleuchtete Fenster sehr dramatisch.</p>

<p>Und wie baut man einen solchen Wechsel nun in seine Mod ein? Mir sind dazu drei Möglichkeiten bekannt, die ich hier vorstellen werde. Ein Tutorial, das genauer die Methode zwei vorstellt, ist auch in Arbeit.</p>

<!--more-->


<h4>Methode 1: Lokales Script</h4>


<p>Dies ist die offensichtlichste und einfachste Methode, einen Wechsel von Tag und Nacht umzusetzen. Man lässt auf jedem Objekt, das von der Tageszeit beeinflusst werden soll, ein entsprechendes Script laufen. Dieses muss nur die Tageszeit festellen und je nachdem den &#8220;enable&#8221; oder &#8220;disable&#8221;-Befehl auslösen. Dieses könnte dann ungefähr so aussehen:</p>

<p><code>scn LightingScript
begin gamemode
; Tag und nebelig -&gt; ein
if ( gamehour &gt;= 6 || gamehour &lt; 21 ) &amp;&amp; ( GetIsCurrentWeather Fog == 1 )
enable
endif</code></p>

<p><code>; Tag und schön -&gt; aus
if ( gamehour &gt;= 6 || gamehour &lt; 21 ) &amp;&amp; ( GetIsCurrentWeather Fog != 1 )
disable
endif</code></p>

<p><code> </code></p>

<p> </p>

<p><code>; Nacht -&gt; ein
if gamehour &gt;= 21 || gamehour &lt; 6
enable
endif
end</code></p>

<p>Natürlich muss man gegebenenfalls &#8220;disable&#8221; und &#8220;enable&#8221; vertauschen, je nach Anwendung. Eine unbeleuchtetes Fenster zum Beispiel muss ja tagsüber enabled sein.
Der große Nachteil dieser Methode ist jedoch offensichtlich: sie frisst Performance. Denn auf jedem Objekt läuft ein Script, das in jedem einzelnen Frame berechnet werden muss. Und eigentlich nur zweimal am Tag etwas tun soll&#8230;
Dazu kommt ein zweites Problem. Man muss für jedes Objekt eine jeweilige Tag- und Nacht-Version erstellen. Das ist zum Beispiel bei den Kerzen recht nervig. Oblivion liefert ja schon ausgeschaltete Versionen mit - man muss jedoch trotzdem nochmals eigene Varianten herstellen, was doch ein wenig unelegant ist.</p>

<h4>Methode 2: Globales Script und Parents</h4>


<p>[caption id=&#8221;attachment_335&#8221; align=&#8221;alignleft&#8221; width=&#8221;400&#8221; caption=&#8221;Diese Methode wird bei Eleyon eingesetzt.&#8221;]<a href="http://lumenpage.com/blog/wp-content/uploads/2008/12/eleyon20jpg.jpeg"><img src="http://lumenpage.com/blog/wp-content/uploads/2008/12/eleyon20jpg-400x250.jpg" alt="Diese Methode wird bei Eleyon eingesetzt." title="eleyon20jpg" width="400" height="250" class="size-thumbnail wp-image-335" /></a>[/caption]Jedes Objekt in Oblivion kann eine Parent-Referenz haben, dessen Enable- und Disable-Status es teilt. Auf diesem Verhalten basiert die zweite Methode. Es wird nur jeweils ein &#8220;Meister-Objekt&#8221; für Tag und Nacht definiert.
Noch eleganter ist natürlich die Variante mit nur einer Referenz: wenn man bei den Children den Haken bei &#8220;Set Enable State to Opposite of Parent&#8221; setzt, wird der Status umgedreht.
Hat man sich nun seine Meister-Referenz(en) gebaut (die unbedingt auf &#8220;Persistent Reference&#8221; gestellt werden müssen), muss man nur noch ein simples QuestScript schreiben, das sie jeweils enabled und disabled. Das Schöne dabei ist die Variable <a href="http://cs.elderscrolls.com/constwiki/index.php/FQuestDelayTime">fQuestDelayTime</a>, die festlegt, wie oft ein QuestScript durchläuft. So wird es nicht ständig ausgeführt, sondern kann sich alle paar Minuten einschalten und die Tageszeit prüfen.
Somit ist der große Vorteil dieser Methode der Performancegewinn durch das einzelne, nicht in jedem Frame laufende Quest-Script.
Praktischerweise kann man mit dieser Methode jedes beliebige Objekt einfach tageszeitabhängig machen. Man muss keine neuen Objekte erstellen, eine kleine Einstellung bei &#8220;Enable Parent&#8221; genügt. So kann man auch schnell mal einen Schmetterling nur tagsüber fliegen lassen und ihn nachts durch Glühwürmchen ersetzen.
Der Nachteil ist jedoch eine gewisse Mehrarbeit beim Platzieren von Objekten, da jeder einzelnen Referenz der passende Parent zugewiesen werden muss. Die Abhängigkeit von Parents macht diese Methode auch unflexibler - alles wird zur gleichen Zeit verändert. Das möchte man allerdings meistens auch genau so haben. Eine Pause zwischen dem Disablen der Tagesfenster und dem Enablen der nächtlichen Fenster wäre recht unschön.</p>

<h4>Methode 3: Emissive Color</h4>


<p>[caption id=&#8221;attachment_309&#8221; align=&#8221;alignleft&#8221; width=&#8221;400&#8221; caption=&#8221;Die Fenster in Chorrol, mit Texians Methode beleuchtet.&#8221;]<a href="http://lumenpage.com/blog/wp-content/uploads/2008/12/texians.png"><img class="size-thumbnail wp-image-309" title="texians" src="http://lumenpage.com/blog/wp-content/uploads/2008/12/texians-400x250.png" alt="Die Fenster in Chorrol, mit Texians Methode beleuchtet." width="400" height="250" /></a>[/caption]</p>

<p>Diese interessante, in <a href="http://www.oblivionmodwiki.com/index.php?title=Texian's_Window_Lighting_System">Texian&#8217;s Window Lighting System</a> eingesetzte Methode kommt ganz ohne Scripts aus. Sie basiert auf dem Zusammenspiel der Emissive Color einer NiTriStrip und der Glowmap. Die <a href="http://cs.elderscrolls.com/constwiki/index.php/Working_With_Nifs_301_:_Properties_Breakdown">Emissive Color</a> bestimmt das Schimmern, das zunimmt, je weniger Licht auf ein Objekt fällt. Bei dieser Methode wird diese nun auf Orange gesetzt, so dass die Fenster im Dunkeln orange schimmern. Eine Glow-Map legt nun fest, welche Teile des Fensters von diesem Effekt betroffen sind - leuchtende Fensterrahmen sind nicht unbedingt erwünscht.</p>

<p>Auf diese Weise kann man Fenster nachts leuchten kann, ohne zu scripten, ohne neue Nifs zu bauen, die nur aus den Fenstern bestehen, ohne auf die Veränderung des Wetters zu achten und so weiter. Offensichtlich ist diese Methode nur für Fenster anwendbar, Lichtquellen müssen immernoch von Hand platziert und geskriptet werden.
Worin ein großer Nachteil dieses Vorgehens liegt. Denn wenn die Fenster mit ihrer Emissive Color leuchten, strahlen sie kein Licht an ihre Umgebung ab. So bleiben nahe Hauswände im Dunkeln, man sieht keinen Lichtschein aus Fenstern kommen. Daher finde ich die Beleuchtung dieser Methode, so genial sie auch ist, doch ein wenig unrealistisch und schwach. Ich bevorzuge das Zusammenspiel von veränderten Fenstertexturen und Lichtquellen. Das wirkt viel leuchtender und lebendiger.</p>

<p><strong>Und ihr? Welche Methode verwendet ihr? Oder haltet ihr eine tageszeitabhängige Beleuchtung für sinnfreie Spielerei?</strong></p>

	</section>
	<footer>
		<span class="date">21.12.2008</span>
		
		

<span class="categories"> —  
  
    <a class='category' href='/tag/articles/'>Articles</a>, <a class='category' href='/tag/beleuchtung/'>Beleuchtung</a>, <a class='category' href='/tag/essay/'>Essay</a>, <a class='category' href='/tag/featured/'>Featured</a>, <a class='category' href='/tag/nifskope/'>NifSkope</a>, <a class='category' href='/tag/oblivion/'>Oblivion</a>, <a class='category' href='/tag/scripting/'>Scripting</a>, <a class='category' href='/tag/texturieren/'>Texturieren</a>
  
</span>

	</footer>
</article>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'lumenlog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

			</div>
<div id="secondary" class="instapaper_ignore">
				<nav class="bottom">
				
				<form id="search" action="http://www.duckduckgo.com" method="get">
				  <fieldset>
					    <input type="hidden" name="sites" value="lumenlog.com" />
					    <input class="search" type="text" name="q" placeholder="Search&hellip;"/>
				  </fieldset>
				</form>
				
				<div id="nav-links">
					<a href="/about" class="nav-link">About & Colophon</a>
					<a href="/archive" class="nav-link">Archive</a>
				</div>
				</nav>
				<section id="about-english">
				<p>Oh. You made it all the way down here. Congratulations, you seem to be liking this so far. :) Time to get acquainted. I'm Marcel, this is where I put stuff on the internet. You can follow me on <a href="https://twitter.com/xartas">Twitter</a>, read the <a href="/about">about page</a> (if you're into that sort of thing) or just explore this blog. Have fun & thanks for stopping by!</p>
				</section>
				<section id="about-german">
				<p>
				Du hast es bis hier unten geschafft. Bravo, irgendwas mache ich wohl richtig. ;) Ich bin übrigens Marcel, hier schreibe ich über Sachen, die ich interessant finde. Du kannst mir auch auf <a href="https://twitter.com/xartas">Twitter</a> folgen, oder mir beim <a href="http://retinacast.de">Retinacast</a> dabei zuhören, wie ich mich mit anderen über Serien unterhalte. Oder dich einfach weiter umschauen. Viel Spaß!
				</section>
				<p class="flattr-button"><a class="FlattrButton" style="display:none;" href="http://lumenlog.com/"></a>
				<noscript><a href="http://flattr.com/thing/3276/Lumenlog" target="_blank">
				<img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" /></a></noscript></p>
				<p class="about-flattr"><a href="http://quietube.com/v.php/http://www.youtube.com/watch?v=4Hcs7KDvDBo">Was ist Flattr?</a></p>
			</div> 
			
			
			
			<footer class="instapaper_ignore">
				<span class="copyright_link">This blog is released under a <a class="link-license" rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/de/">CC-BY-NC</a> license.</span>
				<span class="impressum_link"><a href="/impressum">Impressum</a></span>
			<span class="feed_link"></span>–
<span class="powered_link">Powered by <a href="http://octopress.org/">Octopress</a>, hosted by <a href="http://webfaction.com/">Webfaction</a> and <a href="http://haveamint.com/">Minted</a>, of course.
</span>
			</footer>
		</div>
		
		<!--[if lt IE 7 ]>
			<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
			<script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
		<![endif]-->
	</body>
</html>
